<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Carmen Sandiego: City Hunt</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body {
      margin: 0;
      font-family: 'Courier New', monospace;
      background: #111;
      color: #fdf6e3;
    }
    #map {
      height: 100vh;
      width: 100vw;
    }
    #status {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,0.7);
      padding: 10px;
      border: 2px solid #fdf6e3;
      z-index: 999;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    .modal-content {
      background: #222;
      border: 2px solid #fdf6e3;
      padding: 20px;
      color: #fdf6e3;
      max-width: 500px;
    }
    .modal img {
      max-width: 100%;
      border: 1px solid #fdf6e3;
    }
    .flag {
      width: 24px;
      vertical-align: middle;
      margin-right: 5px;
    }
    button {
      margin-top: 15px;
      background: #444;
      color: #fdf6e3;
      border: 1px solid #fdf6e3;
      padding: 5px 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="status">Cities found: <span id="found">0</span> / 5</div>

  <div id="modal" class="modal">
    <div class="modal-content" id="modalContent">
      <p>Content</p>
      <button onclick="closeModal()">Close</button>
    </div>
  </div>

  <audio id="correctSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="wrongSound" src="https://actions.google.com/sounds/v1/cartoon/boing.ogg"></audio>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const correctCities = [
      {
        name: "Harbin",
        country: "China",
        lat: 45.75,
        lon: 126.65,
        flag: "https://flagcdn.com/cn.svg",
        image: "harbin.jpg",
        description: "My first destination after leaving Brasil was Harbin, one of the coldest city in China, where during winter the average temperature is -17Â°C, and some days I experienced -32Â°C. As part of the Chinese culture, they have a great respect towards the older or higher in hierarchy, where even the position of your glass when cheering had a meaning (Your glass should always be below the others, to show respect). Also, drinking alcohol is a huge part of the culture, it was normal for some people you just met to ask how many bottles of beer you can drink. This was measured in 600 mL bottles. And if you end up going for dinner with them, they will challenge you and make you drink as much as you can. Everyone gets their own bottle, to keep count, and when someone shouts â€˜Ganbeiâ€™, everyone takes their short glass full of beer and drinks bottom up. Iâ€™ve seen people drinking 18 bottles of beer in a 2-hour dinner. And most of them seem to be fine after that."
      },
      {
        name: "Dubai",
        country: "UAE",
        lat: 25.2048,
        lon: 55.2708,
        flag: "https://flagcdn.com/ae.svg",
        image: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Dubai_Skyline_2020.jpg/640px-Dubai_Skyline_2020.jpg",
        description: "Dubai dazzles with skyscrapers, desert adventures, and luxury lifestyle."
      },
      {
        name: "Punta Cana",
        country: "Dominican Republic",
        lat: 18.58,
        lon: -68.405,
        flag: "https://flagcdn.com/do.svg",
        image: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Bavaro_beach%2C_Punta_Cana.jpg/640px-Bavaro_beach%2C_Punta_Cana.jpg",
        description: "Punta Cana is a beach paradise of palm trees and turquoise water."
      },
      {
        name: "Cancun",
        country: "Mexico",
        lat: 21.1619,
        lon: -86.8515,
        flag: "https://flagcdn.com/mx.svg",
        image: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Cancun_Aerial_View.jpg/640px-Cancun_Aerial_View.jpg",
        description: "Cancun mixes Mayan ruins, beach resorts, and wild nightlife."
      },
      {
        name: "Sao Paulo",
        country: "Brazil",
        lat: -23.55,
        lon: -46.63,
        flag: "https://flagcdn.com/br.svg",
        image: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Sao_Paulo_City_%28cropped%29.jpg/640px-Sao_Paulo_City_%28cropped%29.jpg",
        description: "Sao Paulo is Brazilâ€™s biggest city with culture, chaos, and charm."
      }
    ];

    const wrongCities = [
      { name: "Tokyo", lat: 35.6762, lon: 139.6503, fun: "Konnichiwa! But you've never lived in anime land." },
      { name: "Paris", lat: 48.8566, lon: 2.3522, fun: "Croissants? Oui. But not your home!" },
      { name: "New York", lat: 40.7128, lon: -74.0060, fun: "Not even a Central Park picnic?" },
      { name: "Istanbul", lat: 41.0082, lon: 28.9784, fun: "Wrong continent, detective!" },
      { name: "Cape Town", lat: -33.9249, lon: 18.4241, fun: "You got close to a penguin... but not a residence." },
      { name: "Sydney", lat: -33.8688, lon: 151.2093, fun: "Not even a surfboard in sight!" },
      { name: "Rome", lat: 41.9028, lon: 12.4964, fun: "No pizza or passport stamps here." }
    ];

    let found = 0;

    const map = L.map('map').setView([20, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 6,
      attribution: 'Â© OpenStreetMap'
    }).addTo(map);

    function showModal(html) {
      document.getElementById("modalContent").innerHTML = html + '<br><button onclick="closeModal()">Close</button>';
      document.getElementById("modal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }

    function updateStatus() {
      document.getElementById("found").innerText = found;
    }

    function handleCorrect(city) {
      found++;
      updateStatus();
      document.getElementById("correctSound").play();
      showModal(`
        <h2><img src="${city.flag}" class="flag">${city.name}, ${city.country}</h2>
        <p>${city.description}</p>
        <img src="${city.image}" alt="${city.name}">
      `);
      if (found === 5) {
        setTimeout(() => {
          showModal(`<h2>ðŸŽ‰ Case Closed!</h2><p>You found all the cities you lived in!</p>`);
        }, 1000);
      }
    }

    function handleWrong(city) {
      document.getElementById("wrongSound").play();
      showModal(`<p><strong>${city.name}</strong>: ${city.fun}</p>`);
    }

    correctCities.forEach(city => {
      const marker = L.marker([city.lat, city.lon]).addTo(map);
      marker.on("click", () => handleCorrect(city));
    });

    wrongCities.forEach(city => {
      const marker = L.marker([city.lat, city.lon]).addTo(map);
      marker.on("click", () => handleWrong(city));
    });
  </script>
</body>
</html>
